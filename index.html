<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Tajinier ‚Ä¢ Avis & Roulette</title>

<style>
:root{
  --brown:#8b4513;
  --dark:#6f3b12;
  --cream:#fffaf4;
  --accent:#c46a2b;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:#f2f2f2;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
}

.container{
  max-width:420px;
  margin:30px auto;
  background:var(--cream);
  border-radius:28px;
  padding:26px 20px 32px;
  text-align:center;
  box-shadow:0 25px 45px rgba(0,0,0,.15);
}

h1{color:var(--brown);margin:0 0 6px}

.subtitle{color:#666;margin-bottom:20px}

input{
  width:100%;
  padding:14px;
  border-radius:14px;
  border:1px solid #ddd;
  margin-bottom:16px;
  font-size:16px;
}

button{
  width:100%;
  padding:16px;
  font-size:17px;
  font-weight:600;
  border:none;
  border-radius:18px;
  background:linear-gradient(180deg,var(--brown),var(--dark));
  color:white;
  cursor:pointer;
}

.alert{
  background:#fff3e6;
  border:1px solid #ffd3a8;
  color:#8a4b12;
  padding:14px;
  border-radius:14px;
  font-size:14px;
  margin:18px 0;
}

.wheel-wrapper{
  position:relative;
  width:300px;
  height:300px;
  margin:0 auto 26px;
}

canvas{width:300px;height:300px}

.pointer{
  position:absolute;
  top:-12px;
  left:50%;
  transform:translateX(-50%);
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:26px solid var(--accent);
}

.hidden{display:none}

.footer{margin-top:14px;font-size:13px;color:#777}
</style>
</head>

<body>

<div class="container">

  <!-- PAGE AVIS -->
  <div id="avisPage">
    <h1>Tajinier</h1>
    <div class="subtitle">Merci pour votre visite ‚ú®</div>

    <input type="email" id="email" placeholder="Votre email">

    <button id="reviewBtn">‚≠ê Laisser un avis Google</button>

    <div class="alert">
      Apr√®s avoir publi√© votre avis,<br>
      revenez ici pour tourner la roulette üéÅ
    </div>

    <button id="goRoulette">üé∞ Acc√©der √† la roulette</button>
  </div>

  <!-- PAGE ROULETTE -->
  <div id="roulettePage" class="hidden">
    <h1>Roulette Gourmande</h1>
    <div class="subtitle">Bonne chance üéÅ</div>

    <div class="alert">
      ‚ö†Ô∏è Une preuve de l‚Äôavis Google sera demand√©e
    </div>

    <div class="wheel-wrapper">
      <div class="pointer"></div>
      <canvas id="wheel"></canvas>
    </div>

    <button id="spinBtn">üé∞ Tourner la roulette</button>

    <div class="footer">Jeu valable une seule fois.</div>
  </div>

</div>

<script>
const reviewBtn = document.getElementById("reviewBtn");
const goRoulette = document.getElementById("goRoulette");
const avisPage = document.getElementById("avisPage");
const roulettePage = document.getElementById("roulettePage");

reviewBtn.addEventListener("click",()=>{
  window.open("https://search.google.com/local/writereview?placeid=ChIJ5yphIvDZVA0Rykpm0HohmHA","_blank");
});

goRoulette.addEventListener("click",()=>{
  avisPage.classList.add("hidden");
  roulettePage.classList.remove("hidden");
});

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");
const spinBtn = document.getElementById("spinBtn");

const prizes = [
  "üéü Prochaine visite",
  "üç∞ Dessert maison",
  "‚òï Caf√© ou th√©",
  "üçü Portion offerte",
  "üòÖ Rien cette fois"
];

const colors = ["#a85d1a","#8b4513","#c46a2b","#7a3e12","#6f737d"];

const size = 300;
canvas.width = size*2;
canvas.height = size*2;
ctx.translate(size,size);

let angle = 0;
let spinning = false;

function drawWheel(){
  const slice = (2*Math.PI)/prizes.length;
  ctx.clearRect(-size,-size,size*2,size*2);

  prizes.forEach((text,i)=>{
    ctx.beginPath();
    ctx.fillStyle = colors[i];
    ctx.moveTo(0,0);
    ctx.arc(0,0,size,angle+i*slice,angle+(i+1)*slice);
    ctx.fill();

    ctx.save();
    ctx.rotate(angle+(i+.5)*slice);
    ctx.fillStyle="white";
    ctx.font="bold 16px sans-serif";
    ctx.textAlign="right";
    ctx.fillText(text,size-20,5);
    ctx.restore();
  });
}

drawWheel();

spinBtn.addEventListener("click",()=>{
  if(spinning) return;
  spinning=true;

  const start=angle;
  const target=start+Math.PI*8+Math.random()*Math.PI*2;
  const duration=3500;
  const startTime=performance.now();

  function animate(t){
    const p=Math.min((t-startTime)/duration,1);
    const ease=1-Math.pow(1-p,3);

    angle=start+(target-start)*ease;
    drawWheel();

    if(p<1) requestAnimationFrame(animate);
    else spinning=false;
  }

  requestAnimationFrame(animate);
});
</script>

</body>
</html>
