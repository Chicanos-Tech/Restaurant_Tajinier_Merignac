<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Roulette Gourmande ‚Ä¢ Avis Google</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:Inter,sans-serif;
  background:radial-gradient(circle at top,#fffaf0,#f8fafc);
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#1f2937;
}

.container{
  width:100%;
  max-width:420px;
  padding:20px;
}

.card{
  background:#fff;
  border-radius:32px;
  padding:28px;
  box-shadow:0 40px 80px -30px rgba(0,0,0,.25);
  text-align:center;
}

.logo{
  font-size:2.2rem;
  font-weight:700;
  background:linear-gradient(135deg,#7c2d12,#b45309);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.subtitle{
  margin:10px 0 18px;
  color:#6b7280;
  font-size:.95rem;
}

.notice{
  background:#fff7ed;
  border:1px solid #fed7aa;
  color:#9a3412;
  padding:14px;
  border-radius:16px;
  font-size:.85rem;
  margin-bottom:18px;
}

button{
  width:100%;
  padding:16px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg,#7c2d12,#b45309);
  color:white;
  font-weight:600;
  font-size:1rem;
  cursor:pointer;
  box-shadow:0 10px 25px rgba(180,83,9,.35);
}

button.secondary{
  background:#f3f4f6;
  color:#111827;
  box-shadow:none;
  margin-top:12px;
}

button:active{transform:scale(.97)}

.page{display:none}
.page.active{display:block}

/* ROULETTE */
.wheel-wrapper{
  position:relative;
  width:300px;
  height:300px;
  margin:24px auto;
}

canvas{
  width:300px;
  height:300px;
  border-radius:50%;
}

.pointer{
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:14px solid transparent;
  border-right:14px solid transparent;
  border-bottom:26px solid #9a3412;
  z-index:10;
}

.result{
  margin-top:18px;
  font-size:1.15rem;
  font-weight:600;
}

.footer{
  margin-top:14px;
  font-size:.8rem;
  color:#6b7280;
}
</style>
</head>

<body>

<div class="container">
  <div class="card">

    <!-- PAGE AVIS -->
    <div id="pageAvis" class="page active">
      <div class="logo">Merci pour votre visite üçΩÔ∏è</div>
      <p class="subtitle">Laissez un avis Google et tentez de gagner un cadeau gourmand</p>

      <div class="notice">
        ‚≠ê Cliquez ci-dessous pour publier votre avis Google.<br>
        üé∞ Une roulette cadeau vous attend juste apr√®s.
      </div>

      <button onclick="leaveReview()">‚≠ê Laisser un avis Google</button>

      <button class="secondary" onclick="goToWheel()">
        J‚Äôai d√©j√† publi√© mon avis ‚Üí
      </button>
    </div>

    <!-- PAGE ROULETTE -->
    <div id="pageWheel" class="page">
      <div class="logo">Roulette Gourmande</div>
      <p class="subtitle">Bonne chance üéÅ</p>

      <div class="notice">
        ‚ö†Ô∏è Pour r√©cup√©rer votre gain, une
        <strong>preuve de l‚Äôavis Google</strong>
        sera demand√©e (capture √©cran ou email).
      </div>

      <div class="wheel-wrapper">
        <div class="pointer"></div>
        <canvas id="wheel"></canvas>
      </div>

      <button id="spinBtn">üé∞ Tourner la roulette</button>

      <div class="result" id="result"></div>

      <div class="footer">
        Jeu valable une seule fois par client.
      </div>
    </div>

  </div>
</div>

<script>
/* ---------- NAVIGATION ---------- */
function leaveReview(){
  window.open(
    "https://search.google.com/local/writereview?placeid=ChIJ5yphIvDZVA0Rykpm0HohmHA",
    "_blank"
  );
}

function goToWheel(){
  document.getElementById("pageAvis").classList.remove("active");
  document.getElementById("pageWheel").classList.add("active");
}

/* ---------- ROULETTE PRO ---------- */
const prizes = [
  "Dessert maison üç∞",
  "Th√© √† la menthe üçµ",
  "Boisson offerte ü•§",
  "-10% prochaine visite üéüÔ∏è",
  "Rien cette fois üòÖ"
];

const colors = [
  "#92400e",
  "#b45309",
  "#7c2d12",
  "#a16207",
  "#6b7280"
];

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

const size = 300;
const dpr = window.devicePixelRatio || 1;

canvas.width = size * dpr;
canvas.height = size * dpr;
canvas.style.width = size + "px";
canvas.style.height = size + "px";
ctx.scale(dpr, dpr);

const center = size / 2;
const radius = center - 10;
let angle = 0;
let spinning = false;

function drawWheel(){
  ctx.clearRect(0,0,size,size);
  const slice = (Math.PI * 2) / prizes.length;

  prizes.forEach((label, i) => {
    const start = angle + i * slice;
    const end = start + slice;

    ctx.beginPath();
    ctx.moveTo(center, center);
    ctx.arc(center, center, radius, start, end);
    ctx.closePath();
    ctx.fillStyle = colors[i];
    ctx.fill();

    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 2;
    ctx.stroke();

    ctx.save();
    ctx.translate(center, center);
    ctx.rotate(start + slice / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#fff";
    ctx.font = "600 14px Inter";
    ctx.fillText(label, radius - 16, 6);
    ctx.restore();
  });
}

function spin(){
  if(spinning) return;
  spinning = true;

  const spins = 6;
  const target = angle + spins * Math.PI * 2 + Math.random() * Math.PI * 2;
  const duration = 4200;
  const start = performance.now();
  const initial = angle;

  function animate(now){
    const progress = Math.min((now - start) / duration, 1);
    const ease = 1 - Math.pow(1 - progress, 3);
    angle = initial + (target - initial) * ease;
    drawWheel();

    if(progress < 1){
      requestAnimationFrame(animate);
    } else {
      spinning = false;

      const index = Math.floor(
        prizes.length -
        (angle % (Math.PI * 2)) / (Math.PI * 2) * prizes.length
      ) % prizes.length;

      document.getElementById("result").textContent =
        "üéâ Vous avez gagn√© : " + prizes[index];

      confetti({particleCount:120, spread:80, origin:{y:0.7}});
    }
  }

  requestAnimationFrame(animate);
}

document.getElementById("spinBtn").onclick = spin;
drawWheel();
</script>

</body>
</html>
