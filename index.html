<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Tajinier ‚Ä¢ Cadeau Gourmand</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  font-family:Inter,sans-serif;
  background:radial-gradient(circle at top,#fffaf0,#f8fafc);
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:#1f2937;
}

.container{
  width:100%;
  max-width:420px;
  padding:22px;
}

.card{
  background:white;
  border-radius:32px;
  padding:28px;
  box-shadow:
    0 40px 80px -30px rgba(0,0,0,.25),
    inset 0 1px 0 rgba(255,255,255,.6);
  text-align:center;
}

.logo{
  font-size:2.4rem;
  font-weight:700;
  background:linear-gradient(135deg,#7c2d12,#b45309);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

.subtitle{
  margin:14px 0 18px;
  color:#6b7280;
  font-size:.95rem;
}

#wheelPage{display:none}

.wheel-wrapper{
  position:relative;
  width:280px;
  height:280px;
  margin:22px auto;
}

.pointer{
  position:absolute;
  top:-6px;
  left:50%;
  transform:translateX(-50%);
  width:0;height:0;
  border-left:12px solid transparent;
  border-right:12px solid transparent;
  border-bottom:20px solid #b45309;
  filter:drop-shadow(0 4px 6px rgba(0,0,0,.25));
}

canvas{
  width:280px;
  height:280px;
  border-radius:50%;
}

button{
  width:100%;
  padding:16px;
  border-radius:999px;
  border:none;
  background:linear-gradient(135deg,#7c2d12,#b45309);
  color:white;
  font-weight:600;
  font-size:1rem;
  cursor:pointer;
}

.result{
  margin-top:16px;
  font-size:1.15rem;
  font-weight:600;
}
</style>
</head>

<body>

<div class="container">

<div id="wheelPage" class="card">
  <div class="logo">Roulette gourmande</div>
  <p class="subtitle">Merci pour votre avis üçΩÔ∏è</p>

  <div class="wheel-wrapper">
    <div class="pointer"></div>
    <canvas id="wheel"></canvas>
  </div>

  <button id="spin">üé∞ Tourner la roulette</button>
  <div class="result" id="result"></div>
</div>

</div>

<script>
const prizes = [
  "Th√© √† la menthe üçµ",
  "Dessert maison üç∞",
  "Boisson offerte ü•§",
  "-10% prochaine visite üéüÔ∏è",
  "Rien aujourd‚Äôhui üòÖ"
];

const colors = ["#7c2d12","#b45309","#92400e","#a16207","#6b7280"];

const canvas = document.getElementById("wheel");
const ctx = canvas.getContext("2d");

// üéØ CANVAS HD (ANTI FLOU)
const size = 280;
const dpr = window.devicePixelRatio || 1;
canvas.width = size * dpr;
canvas.height = size * dpr;
ctx.scale(dpr, dpr);

let angle = 0;
let spinning = false;

function drawWheel(){
  const center = size / 2;
  const radius = center - 8;
  const slice = (Math.PI * 2) / prizes.length;

  ctx.clearRect(0,0,size,size);

  prizes.forEach((text,i)=>{
    const start = angle + i * slice;

    ctx.beginPath();
    ctx.moveTo(center,center);
    ctx.arc(center,center,radius,start,start+slice);
    ctx.fillStyle = colors[i % colors.length];
    ctx.fill();

    ctx.save();
    ctx.translate(center,center);
    ctx.rotate(start + slice/2);
    ctx.textAlign = "right";
    ctx.fillStyle = "white";
    ctx.font = "600 14px Inter";
    ctx.fillText(text, radius - 14, 5);
    ctx.restore();
  });
}

function easeOut(t){
  return 1 - Math.pow(1 - t, 3);
}

function spin(){
  if(spinning) return;
  spinning = true;

  const start = angle;
  const target = angle + Math.PI * 10 + Math.random() * Math.PI * 2;
  const duration = 4200;
  const startTime = performance.now();

  function animate(now){
    const t = Math.min((now - startTime) / duration, 1);
    angle = start + (target - start) * easeOut(t);
    drawWheel();

    if(t < 1){
      requestAnimationFrame(animate);
    }else{
      spinning = false;
      const index = Math.floor(
        prizes.length - (angle % (Math.PI*2)) / (Math.PI*2) * prizes.length
      ) % prizes.length;

      document.getElementById("result").textContent =
        "üéâ Vous avez gagn√© : " + prizes[index];

      confetti({particleCount:120,spread:80});
    }
  }

  requestAnimationFrame(animate);
}

document.getElementById("spin").onclick = spin;
drawWheel();
</script>

</body>
</html>
